# ADR-012 â€” Core Domain Minimal Representations (Step 1)

## Status
Accepted

## Context
Step 1 of the Cursor execution order requires concrete, testable value objects
for core domain types. Several domain concepts are intentionally underspecified
at the semantic level and must not be prematurely finalized.

This ADR defines **minimal, opaque representations** that allow:
- deterministic type integrity
- stable serialization
- auditability

without introducing business semantics.

---

## Decisions

### ReasonCode (v1)

ReasonCode is a **closed, finite set** of string literals.

Allowed values (v1):
- UNKNOWN
- ATTENTION_SUPERIOR
- ATTENTION_INSUFFICIENT
- STABILITY_INSUFFICIENT
- HOLD_TIME_ACTIVE
- COOLDOWN_ACTIVE
- SAFETY_TRIGGERED
- PREFLIGHT_BLOCKED

Rules:
- No free-text reasons allowed
- Extension requires a new ADR
- Codes are machine-oriented, not user-facing

---

### OrderIntent (Step-1 Representation)

OrderIntent expresses intent without execution semantics.

Fields:
- id: OrderIntentId
- side: BUY | SELL
- marketId: MarketId
- intent:
  - type: "ALLOCATION"
  - value: DecimalString

Rules:
- `value` is an opaque decimal string (no precision semantics)
- No distinction between base/quote in Step 1
- No validation beyond non-empty decimal format

Semantic interpretation is deferred to execution documents.

---

### Position (Step-1 Representation)

Position represents exposure without valuation semantics.

Fields:
- id: PositionId
- marketId: MarketId
- size: DecimalString (opaque)
- entryRef: EntryRef

EntryRef:
- executionId: string

Rules:
- No price, PnL, or fill modeling
- Size has no unit semantics in Step 1
- EntryRef is a stable reference only

---

### Strategy

Strategy is represented as an identifier only.

Fields:
- strategyId: string

Format:
```
<name>@v<version>
```

Examples:
- rotation@v1
- edgecase@v1

No behavior or configuration is attached in Step 1.

---

### StrategyInstance

StrategyInstance is represented by identity plus opaque state.

Fields:
- instanceId: UUID
- strategyId: StrategyId
- state: JSON object

Rules:
- State must be serializable
- State must support structural equality
- State semantics are undefined in Step 1

---

## Consequences
- Step 1 can be implemented without guessing semantics
- All representations are stable and testable
- Later documents may refine semantics without breaking identity

---

## Non-Goals
- No trading logic
- No execution semantics
- No financial interpretation

